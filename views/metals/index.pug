extends ../layout

block content
  h2 #{title}
  script.
    var index_gold = [];
    var index_silver = [];
    var index_aluminum = [];
    var index_copper = [];
    var dates = [];
  each obj, i in metals
    script.
      var label = "#{obj.created_at.getMonth()}/#{obj.created_at.getDay()}";
      dates.unshift(label);
      var type = "#{obj.metal}";
      switch(type){
        case "copper":{
          index_copper.unshift("#{obj.price}");
          break;
        }
        case "gold":{
          index_gold.unshift("#{obj.price}");
          break;
        }
        case "silver":{
          index_silver.unshift("#{obj.price}");
          break;
        }
        case"aluminum":{
        index_aluminum.unshift("#{obj.price}");
          break;
        }
      }
  h3 Metals
  div.ct-chart-metals
  script.
    new Chartist.Line('.ct-chart-metals', {
      labels: dates,
      series: [index_gold,index_silver,index_aluminum,index_copper]
    }, {
      fullWidth: true,
      chartPadding: {
        right: 40
      }
    });
  h3 Gold
  div.ct-chart-gold
  script.
    new Chartist.Line('.ct-chart-gold', {
      labels: dates,
      series: [index_gold]
    }, {
      fullWidth: true,
      chartPadding: {
        right: 40
      }
    });
  h3 Silver
  div.ct-chart-silver
  script.
    new Chartist.Line('.ct-chart-silver', {
      labels: dates,
      series: [index_silver]
    }, {
      fullWidth: true,
      chartPadding: {
        right: 40
      }
    });
  h3 Aluminum
  div.ct-chart-aluminum
  script.
    new Chartist.Line('.ct-chart-aluminum', {
      labels: dates,
      series: [index_aluminum]
    }, {
      fullWidth: true,
      chartPadding: {
        right: 40
      }
    });
  h3 Copper
  div.ct-chart-copper
  script.
    new Chartist.Line('.ct-chart-copper', {
      labels: dates,
      series: [index_copper]
    }, {
      fullWidth: true,
      chartPadding: {
        right: 40
      }
    });